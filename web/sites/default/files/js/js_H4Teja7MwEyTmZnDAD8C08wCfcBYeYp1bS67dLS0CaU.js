/* @license GPL-2.0-or-later https://www.drupal.org/licensing/faq */
((Drupal)=>{Drupal.olivero={};function isDesktopNav(){const navButtons=document.querySelector('[data-drupal-selector="mobile-buttons"]');return navButtons?window.getComputedStyle(navButtons).getPropertyValue('display')==='none':false;}Drupal.olivero.isDesktopNav=isDesktopNav;const stickyHeaderToggleButton=document.querySelector('[data-drupal-selector="sticky-header-toggle"]');const siteHeaderFixable=document.querySelector('[data-drupal-selector="site-header-fixable"]');function stickyHeaderIsEnabled(){return stickyHeaderToggleButton.getAttribute('aria-checked')==='true';}function setStickyHeaderStorage(expandedState){if(!expandedState){localStorage.removeItem('Drupal.olivero.stickyHeaderState');return;}const now=new Date();const item={value:expandedState,expiry:now.getTime()+20160000};localStorage.setItem('Drupal.olivero.stickyHeaderState',JSON.stringify(item));}function updateStickyHeaderStorage(expandedState){const stickyHeaderState=localStorage.getItem('Drupal.olivero.stickyHeaderState');if(stickyHeaderState!==null)setStickyHeaderStorage(expandedState);}function toggleStickyHeaderState(pinnedState){if(isDesktopNav()){siteHeaderFixable.classList.toggle('is-expanded',pinnedState);stickyHeaderToggleButton.setAttribute('aria-checked',pinnedState);}}function getStickyHeaderStorage(){const stickyHeaderState=localStorage.getItem('Drupal.olivero.stickyHeaderState');if(!stickyHeaderState)return false;const item=JSON.parse(stickyHeaderState);const now=new Date();if(now.getTime()>item.expiry){localStorage.removeItem('Drupal.olivero.stickyHeaderState');return false;}return item.value;}const fixableElements=document.querySelectorAll('[data-drupal-selector="site-header-fixable"], [data-drupal-selector="social-bar-inner"]');function toggleDesktopNavVisibility(entries){if(!isDesktopNav())return;entries.forEach((entry)=>{fixableElements.forEach((el)=>el.classList.toggle('is-fixed',entry.intersectionRatio<1));});}function getRootMargin(){let rootMarginTop=72;const {body}=document;if(body.classList.contains('toolbar-fixed'))rootMarginTop-=39;if(body.classList.contains('toolbar-horizontal')&&body.classList.contains('toolbar-tray-open'))rootMarginTop-=40;return `${rootMarginTop}px 0px 0px 0px`;}function monitorNavPosition(){const primaryNav=document.querySelector('[data-drupal-selector="site-header"]');const options={rootMargin:getRootMargin(),threshold:[0.999,1]};const observer=new IntersectionObserver(toggleDesktopNavVisibility,options);if(primaryNav)observer.observe(primaryNav);}if(stickyHeaderToggleButton)stickyHeaderToggleButton.addEventListener('click',()=>{const pinnedState=!stickyHeaderIsEnabled();toggleStickyHeaderState(pinnedState);setStickyHeaderStorage(pinnedState);});const siteHeaderInner=document.querySelector('[data-drupal-selector="site-header-inner"]');if(siteHeaderInner)siteHeaderInner.addEventListener('focusin',()=>{if(isDesktopNav()&&!stickyHeaderIsEnabled()){const header=document.querySelector('[data-drupal-selector="site-header"]');const headerNav=header.querySelector('[data-drupal-selector="header-nav"]');const headerMargin=header.clientHeight-headerNav.clientHeight;if(window.scrollY>headerMargin)window.scrollTo(0,headerMargin);}});monitorNavPosition();updateStickyHeaderStorage(getStickyHeaderStorage());toggleStickyHeaderState(getStickyHeaderStorage());})(Drupal);;
((Drupal)=>{Drupal.theme.checkbox=()=>'<input type="checkbox" class="form-checkbox form-boolean form-boolean--type-checkbox"/>';})(Drupal);;
((Drupal,once,tabbable)=>{function isNavOpen(navWrapper){return navWrapper.classList.contains('is-active');}function toggleNav(props,state){const value=!!state;props.navButton.setAttribute('aria-expanded',value);props.body.classList.toggle('is-overlay-active',value);props.body.classList.toggle('is-fixed',value);props.navWrapper.classList.toggle('is-active',value);}function init(props){props.navButton.setAttribute('aria-controls',props.navWrapperId);props.navButton.setAttribute('aria-expanded','false');props.navButton.addEventListener('click',()=>{toggleNav(props,!isNavOpen(props.navWrapper));});document.addEventListener('keyup',(e)=>{if(e.key==='Escape')if(props.olivero.areAnySubNavsOpen())props.olivero.closeAllSubNav();else toggleNav(props,false);});props.overlay.addEventListener('click',()=>{toggleNav(props,false);});props.overlay.addEventListener('touchstart',()=>{toggleNav(props,false);});props.header.addEventListener('keydown',(e)=>{if(e.key==='Tab'&&isNavOpen(props.navWrapper)){const tabbableNavElements=tabbable.tabbable(props.navWrapper);tabbableNavElements.unshift(props.navButton);const firstTabbableEl=tabbableNavElements[0];const lastTabbableEl=tabbableNavElements[tabbableNavElements.length-1];if(e.shiftKey){if(document.activeElement===firstTabbableEl&&!props.olivero.isDesktopNav()){lastTabbableEl.focus();e.preventDefault();}}else{if(document.activeElement===lastTabbableEl&&!props.olivero.isDesktopNav()){firstTabbableEl.focus();e.preventDefault();}}}});window.addEventListener('resize',()=>{if(props.olivero.isDesktopNav()){toggleNav(props,false);props.body.classList.remove('is-overlay-active');props.body.classList.remove('is-fixed');}Drupal.olivero.closeAllSubNav();});props.navWrapper.addEventListener('click',(e)=>{if(e.target.matches(`[href*="${window.location.pathname}#"], [href*="${window.location.pathname}#"] *, [href^="#"], [href^="#"] *`))toggleNav(props,false);});}Drupal.behaviors.oliveroNavigation={attach(context){const headerId='header';const header=once('navigation',`#${headerId}`,context).shift();const navWrapperId='header-nav';if(header){const navWrapper=header.querySelector(`#${navWrapperId}`);const {olivero}=Drupal;const navButton=context.querySelector('[data-drupal-selector="mobile-nav-button"]');const body=document.body;const overlay=context.querySelector('[data-drupal-selector="header-nav-overlay"]');init({olivero,header,navWrapperId,navWrapper,navButton,body,overlay});}}};})(Drupal,once,tabbable);;
((Drupal)=>{const {isDesktopNav}=Drupal.olivero;const secondLevelNavMenus=document.querySelectorAll('[data-drupal-selector="primary-nav-menu-item-has-children"]');function toggleSubNav(topLevelMenuItem,toState){const buttonSelector='[data-drupal-selector="primary-nav-submenu-toggle-button"]';const button=topLevelMenuItem.querySelector(buttonSelector);const state=toState!==undefined?toState:button.getAttribute('aria-expanded')!=='true';if(state){if(isDesktopNav())secondLevelNavMenus.forEach((el)=>{el.querySelector(buttonSelector).setAttribute('aria-expanded','false');el.querySelector('[data-drupal-selector="primary-nav-menu--level-2"]').classList.remove('is-active-menu-parent');el.querySelector('[data-drupal-selector="primary-nav-menu-ðŸ¥•"]').classList.remove('is-active-menu-parent');});}else topLevelMenuItem.classList.remove('is-touch-event');button.setAttribute('aria-expanded',state);topLevelMenuItem.querySelector('[data-drupal-selector="primary-nav-menu--level-2"]').classList.toggle('is-active-menu-parent',state);topLevelMenuItem.querySelector('[data-drupal-selector="primary-nav-menu-ðŸ¥•"]').classList.toggle('is-active-menu-parent',state);}Drupal.olivero.toggleSubNav=toggleSubNav;function handleBlur(e){if(!Drupal.olivero.isDesktopNav())return;setTimeout(()=>{const menuParentItem=e.target.closest('[data-drupal-selector="primary-nav-menu-item-has-children"]');if(!menuParentItem.contains(document.activeElement))toggleSubNav(menuParentItem,false);},200);}secondLevelNavMenus.forEach((el)=>{const button=el.querySelector('[data-drupal-selector="primary-nav-submenu-toggle-button"]');button.removeAttribute('aria-hidden');button.removeAttribute('tabindex');el.addEventListener('touchstart',()=>{el.classList.add('is-touch-event');},{passive:true});el.addEventListener('mouseover',()=>{if(isDesktopNav()&&!el.classList.contains('is-touch-event')){el.classList.add('is-active-mouseover-event');toggleSubNav(el,true);setTimeout(()=>{el.classList.remove('is-active-mouseover-event');},500);}});button.addEventListener('click',()=>{if(!el.classList.contains('is-active-mouseover-event'))toggleSubNav(el);});el.addEventListener('mouseout',()=>{if(isDesktopNav()&&!document.activeElement.matches('[aria-expanded="true"], .is-active-menu-parent *'))toggleSubNav(el,false);});el.addEventListener('blur',handleBlur,true);});function closeAllSubNav(){secondLevelNavMenus.forEach((el)=>{if(el.contains(document.activeElement))el.querySelector('[data-drupal-selector="primary-nav-submenu-toggle-button"]').focus();toggleSubNav(el,false);});}Drupal.olivero.closeAllSubNav=closeAllSubNav;function areAnySubNavsOpen(){let subNavsAreOpen=false;secondLevelNavMenus.forEach((el)=>{const button=el.querySelector('[data-drupal-selector="primary-nav-submenu-toggle-button"]');const state=button.getAttribute('aria-expanded')==='true';if(state)subNavsAreOpen=true;});return subNavsAreOpen;}Drupal.olivero.areAnySubNavsOpen=areAnySubNavsOpen;document.addEventListener('keyup',(e)=>{if(e.key==='Escape')if(isDesktopNav())closeAllSubNav();});document.addEventListener('touchstart',(e)=>{if(areAnySubNavsOpen()&&!e.target.matches('[data-drupal-selector="header-nav"], [data-drupal-selector="header-nav"] *'))closeAllSubNav();},{passive:true});})(Drupal);;
((Drupal,once)=>{function transitionToDesktopNavigation(navWrapper,navItem){document.body.classList.remove('is-always-mobile-nav');if(navWrapper.clientHeight>navItem.clientHeight)document.body.classList.add('is-always-mobile-nav');}function checkIfDesktopNavigationWraps(entries){const navItem=document.querySelector('.primary-nav__menu-item');if(Drupal.olivero.isDesktopNav()&&entries[0].contentRect.height>navItem.clientHeight){const navMediaQuery=window.matchMedia(`(max-width: ${window.innerWidth+15}px)`);document.body.classList.add('is-always-mobile-nav');navMediaQuery.addEventListener('change',()=>{transitionToDesktopNavigation(entries[0].target,navItem);},{once:true});}}function init(primaryNav){const resizeObserver=new ResizeObserver(checkIfDesktopNavigationWraps);resizeObserver.observe(primaryNav);}Drupal.behaviors.automaticMobileNav={attach(context){once('olivero-automatic-mobile-nav','[data-drupal-selector="primary-nav-menu--level-1"]',context).forEach(init);}};})(Drupal,once);;
((Drupal)=>{const searchWideButtonSelector='[data-drupal-selector="block-search-wide-button"]';const searchWideButton=document.querySelector(searchWideButtonSelector);const searchWideWrapperSelector='[data-drupal-selector="block-search-wide-wrapper"]';const searchWideWrapper=document.querySelector(searchWideWrapperSelector);function searchIsVisible(){return searchWideWrapper.classList.contains('is-active');}Drupal.olivero.searchIsVisible=searchIsVisible;function watchForClickOut(e){const clickInSearchArea=e.target.matches(`
      ${searchWideWrapperSelector},
      ${searchWideWrapperSelector} *,
      ${searchWideButtonSelector},
      ${searchWideButtonSelector} *
    `);if(!clickInSearchArea&&searchIsVisible())toggleSearchVisibility(false);}function watchForFocusOut(e){if(e.relatedTarget){const inSearchBar=e.relatedTarget.matches(`${searchWideWrapperSelector}, ${searchWideWrapperSelector} *`);const inSearchButton=e.relatedTarget.matches(`${searchWideButtonSelector}, ${searchWideButtonSelector} *`);if(!inSearchBar&&!inSearchButton)toggleSearchVisibility(false);}}function watchForEscapeOut(e){if(e.key==='Escape')toggleSearchVisibility(false);}function handleFocus(){if(searchIsVisible())searchWideWrapper.querySelector('input[type="search"]').focus();else{if(searchWideWrapper.contains(document.activeElement))searchWideButton.focus();}}function toggleSearchVisibility(visibility){searchWideButton.setAttribute('aria-expanded',visibility===true);searchWideWrapper.classList.toggle('is-active',visibility===true);searchWideWrapper.addEventListener('transitionend',handleFocus,{once:true});if(visibility===true){Drupal.olivero.closeAllSubNav();document.addEventListener('click',watchForClickOut,{capture:true});document.addEventListener('focusout',watchForFocusOut,{capture:true});document.addEventListener('keyup',watchForEscapeOut,{capture:true});}else{document.removeEventListener('click',watchForClickOut,{capture:true});document.removeEventListener('focusout',watchForFocusOut,{capture:true});document.removeEventListener('keyup',watchForEscapeOut,{capture:true});}}Drupal.olivero.toggleSearchVisibility=toggleSearchVisibility;Drupal.behaviors.searchWide={attach(context){const searchWideButtonEl=once('search-wide',searchWideButtonSelector,context).shift();if(searchWideButtonEl){searchWideButtonEl.setAttribute('aria-expanded',searchIsVisible());searchWideButtonEl.addEventListener('click',()=>{toggleSearchVisibility(!searchIsVisible());});}}};})(Drupal);;
